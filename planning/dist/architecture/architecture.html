<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hospital Management System | Master Architectural Blueprint</title>
    <!-- Core External UI Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Architecture Diagram Styles -->
    <link rel="stylesheet" href="./css/architecture.css">
</head>
<body>
<body>

    <header class="diagram-header">
        <div class="relative">
            <h1 id="mainTitle" class="text-3xl font-black text-slate-900 tracking-tight uppercase leading-none animated-title">Hostel Management System</h1>
            <p class="text-slate-500 font-bold uppercase tracking-[0.25em] text-[10px] mt-2 opacity-80">Integrated OS Architecture & Physical Mainframe Logic</p>
            <div class="flex gap-3 mt-3">
                <span class="flex items-center gap-2 text-[8px] font-mono text-slate-500 bg-white/60 backdrop-blur-sm px-3 py-1 rounded-full border border-white">
                    <i class="fas fa-code-branch"></i> REV: 5.1.01-PRECISION-HARDWARE
                </span>
            </div>
        </div>
        
        <div class="flex items-center gap-6">
            <div class="hidden xl:flex flex-col text-right border-r border-slate-200 pr-6">
                <span class="text-[8px] text-slate-400 font-black uppercase tracking-[0.2em] mb-1">Engineering Squad</span>
                <div class="flex gap-3 text-[9px] font-bold text-slate-600">
                    <span>H. Dhakrey</span>
                    <span>A. Bansal</span>
                    <span>Sundram</span>
                    <span>Suyash</span>
                </div>
            </div>

            <div class="bg-white/60 backdrop-blur-xl px-7 py-3 rounded-2xl shadow-xl flex flex-col text-right border border-white transition-all duration-500 hover:border-blue-400/40">
                <span class="text-[9px] text-blue-600 font-black uppercase tracking-[0.3em] mb-1">Principal Architect</span>
                <span class="text-2xl font-black tracking-tighter leading-none text-slate-900 uppercase">Koushal Jha</span>
                <div class="flex items-center justify-end gap-2 mt-1.5">
                    <span class="text-[8px] text-slate-500 font-bold uppercase tracking-widest">Managed by Team OctNov</span>
                </div>
            </div>
            
            <div class="flex gap-4 px-5 py-2.5 bg-white/40 backdrop-blur-md rounded-2xl border border-white/80">
                <div class="flex items-center space-x-2"><div class="w-3 h-3 rounded-sm bg-blue-600"></div><span class="text-[9px] font-black uppercase">Pulse</span></div>
                <div class="flex items-center space-x-2"><div class="w-3 h-3 rounded-sm bg-red-600"></div><span class="text-[9px] font-black uppercase">Alert</span></div>
                <div class="flex items-center space-x-2"><div class="w-3 h-3 rounded-sm bg-[#00f5ff]"></div><span class="text-[9px] font-black uppercase">Hardware</span></div>
            </div>
        </div>
    </header>

    <div class="zoom-controls">
        <div id="zoomPercentage" class="zoom-indicator">40%</div>
        <button class="zoom-btn" onclick="adjustZoom(0.1)"><i class="fas fa-plus"></i></button>
        <button class="zoom-btn" onclick="resetZoom()"><i class="fas fa-expand-arrows-alt"></i></button>
        <button class="zoom-btn" onclick="adjustZoom(-0.1)"><i class="fas fa-minus"></i></button>
    </div>

    <div class="diagram-viewport">
        <div id="mermaidDiagram" class="mermaid">
            graph TD
                CP["<b>ğŸ”„ SYSTEM ORCHESTRATOR</b><br/>Hostel OS Control Pulse"]
                subgraph Gov ["Governance and Command"]
                    CH["ğŸ‘” Chancellor"]
                    DIR["ğŸ¯ Director"]
                    SA["ğŸ›¡ï¸ Super Admin"]
                    ITA["ğŸ’» IT Admin"]
                    BA["ğŸ’¼ Billing Admin"]
                    HR["ğŸ‘¥ HR Manager"]
                    AD["ğŸ“Š Analytics Dashboard"]
                    TM["ğŸ“Š Treasury Manager"]
                    BIO["ğŸ§¬ Biometric Data Hub"]
                end
                subgraph Ops ["Resident Operations"]
                    RL["ğŸ  Resident Leads"]
                    MS["ğŸ§¼ Maintenance Staff"]
                    SBE["Smart Booking Engine"]
                    PCV["âœ… Policy Compliance"]
                    BGP["ğŸ” Critical-Access"]
                    AUL["ğŸ“‘ Forensic Audit"]
                    ACK["Feedback Acknowledgment"]
                end
                subgraph Sec ["Reporting and Security"]
                    QI["ğŸ§ª Quality Inspectors"]
                    SF["ğŸ“¸ Security Feeds"]
                    PACS["ğŸï¸ Assets Vault"]
                    APE["ğŸ”” System Alert"]
                end
                subgraph Fin ["Operational and Financial"]
                    REC["ğŸ“ Registration Desk"]
                    SUP["ğŸ’Š Supply Store"]
                    BS["ğŸ’³ Front-Desk Billing"]
                    SAP["ğŸ“¦ Smart Auto-Procure"]
                end
                subgraph Fac ["Facility and Logistics"]
                    MT["ğŸ‘¨â€ğŸ’¼ Maintenance Team"]
                    SP["ğŸš¨ Security Personnel"]
                    BT["ğŸ”§ Biomedical Technicians"]
                    TD["ğŸš‘ Transit Driver"]
                    SC["ğŸ“¦ Store Controller"]
                end
                subgraph Ext ["External User Interface"]
                    RWP["ğŸ‘¤ Resident Web Portal"]
                    MOB["ğŸ“² Mobile HMS App"]
                    GV["ğŸ‘¥ Guest Visitors"]
                end
                subgraph SecurityPerimeter ["Hardware Security Perimeter"]
                    FW["ğŸ›¡ï¸ Perimeter Firewall"]
                end
                subgraph Infra ["Core Infrastructure Layer"]
                    NSP["ğŸ›¡ï¸ SSL and Load Balancer"]
                    JWT["ğŸ”‘ Token Verification"]
                    NGX["ğŸŒ Nginx Gateway"]
                    JI["â˜• Java Logic Engine"]
                    NF["ğŸŸ¢ Node.js Event Layer"]
                    PG[("ğŸ—„ï¸ PostgreSQL 16+")]
                    RMS["ğŸ–‡ï¸ Master-Slave Sync"]
                    WAL["ğŸ’¾ WAL Integrity"]
                    PM2["âš™ï¸ PM2 Monitor"]
                    SMTP["Hub Notification Relay"]
                    MSG["ğŸ“² Messaging Hub"]
                end
                subgraph API ["Service API Gateway Layer"]
                    REST["ğŸŒ REST API Endpoints"]
                    WSSG["ğŸ“² WebSocket Gateway"]
                    GRPH["ğŸ›¡ï¸ Query Orchestrator"]
                end
                subgraph Services ["Third-Party Ecosystem"]
                    PAY["ğŸ’³ Payment Gateway"]
                    CLD["ğŸ“¦ Cloud Assets Hub"]
                end
                subgraph CoreMainframe ["Physical Core Mainframe Cluster"]
                    CRM["<div class='isolated-server-room'><div class='room-label'><span class='label-text'>SEGMENT_01:ULTRA_WIDE_MAINFRAME_VAULT</span><div class='status-dot-pulse'></div></div><div class='rack-enclosure'><div class='rack-side-bar bar-left'></div><div class='rack-side-bar bar-right'></div><div class='blade'><div class='blade-icon'><i class='bi bi-cpu'></i></div><div class='blade-content'><span class='blade-title'>XEON_COMPUTE_U4</span><span class='blade-sub'>Java Backend Core / Distributed Event-Loop Node</span><div class='load-meter'><div class='load-fill'></div></div></div><div class='led-array'><div class='led-p active'></div><div class='led-p active'></div></div></div><div class='blade'><div class='blade-icon'><i class='bi bi-hdd-stack'></i></div><div class='blade-content'><span class='blade-title'>PGSQL_NVME_U3</span><span class='blade-sub'>ACID Transactions / Synchronous Master-Slave Replicas</span><div class='load-meter'><div class='load-fill' style='animation-delay:0.5s; background:#3b82f6;'></div></div></div><div class='led-array'><div class='led-p active' style='background:#3b82f6'></div><div class='led-p active'></div></div></div><div class='blade'><div class='blade-icon'><i class='bi bi-shield-fill-check'></i></div><div class='blade-content'><span class='blade-title'>GATEWAY_FW_U2</span><span class='blade-sub'>WAF / Load Balancing / Perimeter Ingress Guard</span><div class='load-meter'><div class='load-fill'></div></div></div><div class='led-array'><div class='led-p active'></div><div class='led-p'></div></div></div><div class='blade' style='opacity:0.8'><div class='blade-icon'><i class='bi bi-lightning-fill'></i></div><div class='blade-content'><span class='blade-title'>PWR_UNIT_U1</span><span class='blade-sub'>Offline Redundant Uninterrupted UPS Power Cluster</span><div class='load-meter'><div class='load-fill' style='width:15%; background:#f59e0b;'></div></div></div><div class='led-array'><div class='led-p active' style='background:#f59e0b'></div></div></div></div></div>"]
                end

                CP --> SA
                CP --> RL
                CP --> QI
                CP --> REC
                CP --> MT
                CP --> NSP
                CP --> CH
                CP --> HR
                CP --> ITA
                CP --> BA
                CP --> SP
                CP --> BT
                CP --> BIO
                RL --> SBE
                SBE --> PCV
                PCV --> JI
                RL --> BGP
                MS --> BGP
                BGP --> AUL
                AUL --> ITA
                QI --> APE
                SF --> PACS
                PACS --> RL
                APE --> NF
                NF --> WSSG
                WSSG --> RWP
                WSSG --> RL
                WSSG --> MOB
                WSSG --> FCM
                REC --> JI
                JI --> BT
                BT --> REC
                JI --> PG
                JI --> SUP
                JI --> BS
                BS --> PG
                SUP --> SC
                SC --> SAP
                SAP --> BA
                TD --> CP
                TD --> MS
                MT --> CP
                CP --> MT
                PG --> AD
                PG --> TM
                AD --> DIR
                TM --> DIR
                CH --> DIR
                HR --> DIR
                DIR --> CP
                GV --> FW
                RWP --> FW
                MOB --> FW
                FW --> NSP
                NSP --> JWT
                JWT --> NGX
                NGX --> REST
                NGX --> GRPH
                REST --> JI
                GRPH --> JI
                REST --> NF
                JI --- NF
                NF --> PG
                NF --> SMTP
                NF --> MSG
                BA --> PAY
                PACS --> CLD
                BIO --> HR
                BIO --> JI
                SA --> REST
                HR --> REST
                SC --> REST
                SP --> WSSG
                ITA --> REST
                BA --> PG
                REST -.-> NGX
                NGX -.-> NSP
                NSP -.-> FW
                FW -.-> GV
                FW -.-> RWP
                FW -.-> MOB
                JI -.-> REST
                JI -.-> ACK
                ACK -.-> RL
                WSSG -.-> SP
                JI --> CRM
                NF --> CRM
                PG --> CRM
                REST --> CRM
                WSSG --> CRM
                GRPH --> CRM
                BIO --> CRM
                MOB --> CRM
                PAY --> CRM
                MSG --> CRM
                CLD --> CRM
                FW --> CRM

                linkStyle 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,20,21,22,23,24,25,26,27,28,29,31,39,41,42,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,63,64,67,69,70,71,72,73,75,76,77,78,79,80,81,84 stroke:#3b82f6,stroke-width:3px
                linkStyle 16,17,18,19,40 stroke:#ef4444,stroke-width:3.5px
                linkStyle 15,30,32,33,34,35,36,37,38,43,44,62,65,66,68,74,82,83 stroke:#f59e0b,stroke-width:3px
                linkStyle 85,86,87,88,89,90,91,92,93,94,95,96 stroke:#00f5ff,stroke-width:4px
                
                style CP fill:#3b82f6,color:#fff
                style PG fill:#f59e0b,color:#fff
                classDef iron fill:#eff6ff,stroke:#3b82f6,stroke-width:2px,color:#1e40af
                classDef fluid fill:#ecfdf5,stroke:#10b981,stroke-width:2px,color:#065f46
                classDef critical fill:#fff1f2,stroke:#ef4444,stroke-width:2px,color:#991b1b
                classDef atomic fill:#fffbeb,stroke:#f59e0b,stroke-width:2px,color:#92400e
                classDef server fill:none,stroke:none
                class JI,CP,SBE,PCV,NSP,JWT,REST,WSSG,GRPH,FW iron
                class NF,APE,FCM,SMTP,MSG fluid
                class BGP,AUL critical
                class PG,SAP,WAL,RMS,AD atomic
                class CRM server
        </div>
    </div>

    <!-- Architecture Diagram Scripts -->
    <script src="./js/architecture.js"></script>

    <!-- Security Modules -->
    <script src="../security/security.config.js"></script>
    <script src="../security/device-checker.js"></script>
    <script src="../security/anti-debug.js"></script>
    <script src="../security/copy-protection.js"></script>
    <script src="../security/screenshot-blocker.js"></script>
    <script src="../security/context-menu-blocker.js"></script>
</body>
</html>